@model List<RallyBaneTest.Models.Exercise>;

@{
	Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Rally Bane</title>

	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Figtree:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

	<script src="/konva/konva.min.js"></script>
	<script src="/lib/axios/dist/axios.min.js"></script>
</head>
<body style="background-color:hsl(200, 50%, 90%);font-family:Figtree">
	<button onclick="showGuide()" id="guidebt" class="trackbtn">Vis Guide</button>
	<div id="stage-parent">
		<div id="leftlist" class="track">
			<h4>Guide:</h4>
			<p>Træk øvelserne fra højre ind på banen for at tilføje</p>
			<p>Dobbelklik på banen for at tilføje en pil</p>
			<p>Alle objekter kan roteres ved at klikke på dem</p>
			<p>Slet et objekt ved brug af højrekliks menuen</p>
			<hr />
			<p>Gem den nuværende bane med denne knap:</p>
			<input type="text" placeholder="Vælg navn" id="postName"/>
			<button class="my-2 trackbtn" onclick="saveTrack()">Gem bane</button>
			<p>Hent en bane ved at søge efter navn:</p>
			<input type="text" placeholder="Søg efter navn" id="getName"/>
			<button class="my-2 trackbtn" onclick="fetchTrack()">Hent Bane</button>
		</div>
		<div class="track" id="bane">
		</div>

		<div id="rightlist" class="track">
			<h3 class="bg-light">Øvelser</h3>
			<div id="exercises" class="grid-container">
				<img class="exercise" src="/Images/Start.png" height="52,5" width="75" draggable="true" />
				<img class="exercise" src="/Images/Mål.png" height="52,5" width="75" draggable="true" />
				@foreach (var item in Model)
				{
					<img class="exercise" src="@Html.DisplayFor(x => item.Url)" height="52,5" width="75" draggable="true" />
				}
			</div>
		</div>
	</div>

	<div class="routeCounter" id="route"></div>


	@* Menu til contextmenu på øvelser *@
	<div id="menu">
		<div>
			<button id="up-button">
				<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-dash-square" viewBox="0 0 16 16">
					<path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z" />
					<path d="M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8" />
				</svg>
			</button>
			<button id="down-button">
				<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-square" viewBox="0 0 16 16">
					<path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z" />
					<path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4" />
				</svg>
			</button>
			<button id="info-button">Info</button>
			<button id="delete-button">Slet</button>	
		</div>
	</div>

	<style>
		.countContainer {
			display: flex;
			flex-direction: row;
			width: 90%;
			background-color: white;
			justify-content: space-evenly;
			margin: 3px;
			border: 2px solid white;
			border-radius: 10px;
			transition: border 0.8s ease-out;
		}

		#count {
			font-size: 25px;
			font-weight: 900;
			color: black;
			justify-content: center;
			margin-top: 18px;
		}

		.routeCounter {
			width: 150px;
			height: 800px;
			position: absolute;
			top: 50px;
			left: 50px;
			background-color: rgba(253, 246, 237, 0.9);
			box-shadow: 6px 6px black;
			border: 1px solid black;
			display: flex;
			flex-direction: column;
			align-items: center;
			overflow-y: auto;
			overflow-x: hidden;
			border-radius: 10px;
		}

		#guidebt {
			position: absolute;
			top: 10px;
			left: 75px;
		}

		.exercise {
			margin: 1px;
			cursor: move;
			transition: width 0.5s;
		}

		.exercise:hover {
			border: 1px solid black;
			-ms-zoom: normal;
		}

		.grid-container {
			overflow-y: auto;
			max-height: 75vh;
			display: grid;
			grid-template-columns: auto auto auto;
		}

		#stage-parent {
			margin-top: 50px;
			display: grid;
			grid-template-columns: 10% auto 14%;
			justify-content: space-evenly;
			align-items: center;
		}

		#bane {
			width: auto;
			border: 2px solid black;
			background-color: white;
			overflow: auto;
		}

		#leftlist {
			visibility: hidden;
			z-index: 1;
		}


		#leftlist, #rightlist {
			background-color: rgba(253, 246, 237, 0.9);
			text-align: center;
			border-radius: 10px;
			padding: 10px;
			box-shadow: 6px 6px black;
			border: 1px solid black;
		}

		#getName, #postName {
			width: 80%;
		}

		.trackbtn {
			border-radius: 5px;
			transition: background-color 0.5s;
		}

		.trackbtn:hover {
			background-color: black;
			color: white;
		}

		#menu {
			display: none;
			position: absolute;
			width: 120px;
			background-color: white;
			box-shadow: 0 0 5px grey;
			border-radius: 3px;
		}

			#menu button {
				width: 100%;
				background-color: white;
				border: none;
				margin: 0;
				padding: 10px;
			}

				#menu button:hover {
					background-color: lightgray;
				}
	</style>


	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
	<script type="text/javascript">
		const myVar = @Html.Raw(Json.Serialize(Model));
		function showGuide() {
			var list = document.getElementById("leftlist");
			if (list.style.visibility === "visible") {
				list.style.visibility = "hidden";
			} else {
				list.style.visibility = "visible";
			}
		};
	</script>
	<script src="/js/JavaScript.js"></script>
</body>
</html>
